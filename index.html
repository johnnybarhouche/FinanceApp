<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Credit Card Dues Tracker</title>
  <style>
    :root {
      --bg: #1a1d23;
      --panel: #252930;
      --card: #2a2f36;
      --text: #e1e5e9;
      --muted: #8b949e;
      --border: #373c43;
      --accent: #238636;
      --accent-hover: #2ea043;
      --danger: #da3633;
      --input-bg: #21262d;
      --toggle-bg: #373e47;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); font-size: 14px; line-height: 1.5; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }

    /* Center the month controls */
    .header { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 16px; margin-bottom: 24px; }
    .header-left { justify-self: start; }
    .header-center { justify-self: center; }
    .header-right { justify-self: end; }

    .month-controls { display: inline-flex; align-items: center; gap: 8px; }
    .month-input { background: var(--input-bg); border: 1px solid var(--border); border-radius: 6px; color: var(--text); padding: 6px 12px; font-size: 14px; min-width: 140px; }

    .btn { background: var(--panel); border: 1px solid var(--border); border-radius: 6px; color: var(--text); padding: 6px 12px; font-size: 14px; cursor: pointer; transition: background-color 0.15s ease, transform .05s ease; display: inline-flex; align-items: center; gap: 6px; user-select: none; touch-action: manipulation; }
    .btn:active { transform: scale(0.98); }
    .btn:hover { background: var(--card); }
    .btn-nav { padding: 6px 8px; min-width: 32px; justify-content: center; }
    .btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
    .btn-primary:hover { background: var(--accent-hover); }
    .btn-danger { background: var(--danger); border-color: var(--danger); color: #fff; }

    .hide-toggle { display: flex; align-items: center; gap: 8px; font-size: 14px; color: var(--muted); }
    .toggle { position: relative; width: 44px; height: 24px; background: var(--toggle-bg); border-radius: 999px; border: 1px solid var(--border); }
    .toggle input { position: absolute; inset: 0; width: 100%; height: 100%; opacity: 0; margin: 0; cursor: pointer; }
    .toggle-slider { position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #c9d1d9; border-radius: 50%; transition: left .2s ease, background .2s ease; }
    .toggle input:checked + .toggle-slider { left: 22px; background: #fff; }

    .main-panel { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; margin-bottom: 24px; overflow: hidden; }
    .panel-header { padding: 16px 24px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
    .panel-title { font-size: 16px; font-weight: 600; margin: 0; }

    .totals { display: flex; align-items: center; gap: 24px; font-size: 14px; flex-wrap: wrap; }
    .total-item { display: flex; align-items: center; gap: 4px; }
    .total-value { font-weight: 600; }
    .hidden-amount { filter: blur(4px); transition: filter .2s ease; }
    .currency-selector { background: var(--input-bg); border: 1px solid var(--border); border-radius: 4px; color: var(--text); padding: 2px 6px; font-size: 12px; margin-left: 8px; }
    .fx-note { color: var(--muted); font-size: 11px; }

    .table-container { overflow-x: auto; }
    .empty-state { text-align: center; padding: 48px 24px; color: var(--muted); }
    .empty-icon { font-size: 48px; margin-bottom: 12px; opacity: 0.5; }

    table { width: 100%; border-collapse: collapse; min-width: 720px; }
    th { text-align: left; padding: 12px 24px; font-weight: 600; color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .05em; border-bottom: 1px solid var(--border); }
    td { padding: 16px 24px; border-bottom: 1px solid var(--border); vertical-align: middle; }
    th:nth-child(2), td:nth-child(2) { text-align: right; }

    .currency-input, .amount-input, .date-input { background: var(--input-bg); border: 1px solid var(--border); border-radius: 6px; color: var(--text); padding: 8px 12px; font-size: 14px; }
    .currency-input { width: 82px; margin-right: 8px; }
    .amount-input { width: 140px; text-align: right; }
    .date-input { width: 150px; }

    .status-toggle { cursor: pointer; font-size: 12px; font-weight: 600; padding: 4px 12px; border-radius: 16px; border: none; transition: all .2s ease; min-width: 70px; }
    .status-toggle.paid { background: #0f2a1a; color: #22c55e; border: 1px solid #1f5c3b; }
    .status-toggle.unpaid { background: #291b1b; color: #ef4444; border: 1px solid #563131; }
    .status-toggle:hover { opacity: .85; }

    .action-buttons { display: flex; gap: 12px; padding: 16px 24px; border-top: 1px solid var(--border); }

    .add-card-section { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; margin-bottom: 24px; overflow: hidden; }
    .add-card-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 24px; cursor: pointer; transition: background-color .15s ease; }
    .add-card-header:hover { background: var(--card); }
    .add-card-title { display: flex; align-items: center; gap: 12px; }
    .expand-icon { transition: transform .2s ease; color: var(--muted); }
    .expand-icon.expanded { transform: rotate(180deg); }
    .add-card-content { padding: 0 24px 24px; display: none; }
    .add-card-content.expanded { display: block; }
    .add-icon { background: var(--accent); color: #fff; width: 32px; height: 32px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-weight: 700; }
    .add-form { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
    .card-input { background: var(--input-bg); border: 1px solid var(--border); border-radius: 6px; color: var(--text); padding: 8px 12px; font-size: 14px; flex: 1; min-width: 200px; }
    .cards-list { margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border); font-size: 13px; color: var(--muted); line-height: 1.6; }

    /* Modal */
    .modal{ position: fixed; inset: 0; background: rgba(0,0,0,.55); display: none; align-items: center; justify-content: center; padding: 16px; z-index: 50; }
    .modal.open{ display: flex; }
    .modal-card{ background: var(--panel); border: 1px solid var(--border); border-radius: 12px; width: 100%; max-width: 520px; box-shadow: 0 10px 30px rgba(0,0,0,.4); }
    .modal-header{ padding: 14px 16px; border-bottom: 1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
    .modal-title{ margin:0; font-size:16px; font-weight:700; }
    .modal-body{ padding: 14px 16px; }
    .modal-footer{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; justify-content:flex-end; }

    .card-row{ display:grid; grid-template-columns: 1fr auto auto; gap:10px; align-items:center; padding:8px 0; }
    .card-row input{ background: var(--input-bg); border:1px solid var(--border); border-radius:6px; color:var(--text); padding:8px 10px; font-size:14px; }
    .muted{ color: var(--muted); font-size:12px; }

    @media (max-width: 768px){
      .container{ padding:16px; }
      .add-form{ flex-direction: column; align-items: stretch; }
      .header{ grid-template-columns: 1fr; }
      .header-left{ display:none; }
      .header-right{ justify-self: start; margin-top: 8px; }
      .month-controls{ margin: 0 auto; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-left"></div>
      <div class="header-center">
        <div class="month-controls">
          <button id="btnPrev" class="btn btn-nav" type="button">â€¹</button>
          <span id="monthDisplay" style="font-weight:600; min-width:120px; text-align:center;">Aug 2025</span>
          <input type="month" id="month" class="month-input" style="display:none;" />
          <button id="btnNext" class="btn btn-nav" type="button">â€º</button>
        </div>
      </div>
      <div class="header-right">
        <div class="hide-toggle">
          <span>Hide amounts</span>
          <label class="toggle">
            <input type="checkbox" id="hideToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>
      </div>
    </div>

    <div class="main-panel">
      <div class="panel-header">
        <h1 class="panel-title">Credit Cards</h1>
        <div class="totals">
          <div class="total-item">
            <span>Total:</span>
            <span class="total-value" id="chipTotal">0 AED</span>
          </div>
          <div class="total-item">
            <span>Paid:</span>
            <span class="total-value" id="chipPaid">0 AED</span>
          </div>
          <div class="total-item">
            <span>Remaining:</span>
            <span class="total-value" id="chipRemain">0 AED</span>
            <select class="currency-selector" id="totalCurrency">
              <option value="AED">AED</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="GBP">GBP</option>
              <option value="SAR">SAR</option>
            </select>
          </div>
          <button id="btnRates" class="btn" type="button" title="Edit FX rates">FX Rates</button>
        </div>
      </div>

      <div class="table-container">
        <div id="emptyState" class="empty-state">
          <div class="empty-icon">ðŸ’³</div>
          <div>No credit cards</div>
          <div style="font-size:12px; margin-top:4px;">Get started by adding your first credit card.</div>
        </div>
        <table id="cardsTable" style="display:none;">
          <thead>
            <tr>
              <th>Card</th>
              <th>Amount</th>
              <th>Due Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="paymentsTbody"></tbody>
        </table>
      </div>

      <div class="action-buttons">
        <button id="btnExport" class="btn" type="button">Export CSV</button>
        <button id="btnMarkAll" class="btn btn-primary" type="button">Mark All Paid</button>
        <button id="btnReset" class="btn btn-danger" type="button">Reset Month</button>
      </div>
    </div>

    <div class="add-card-section">
      <div class="add-card-header" id="addCardToggle">
        <div class="add-card-title">
          <div class="add-icon">+</div>
          <div>
            <div style="font-weight:600;">Add New Credit Card</div>
            <div style="font-size:12px; color: var(--muted);">Add a new card to track its monthly payments</div>
          </div>
        </div>
        <div class="expand-icon" id="expandIcon">âŒ„</div>
      </div>
      <div class="add-card-content expanded" id="addCardContent">
        <div class="add-form">
          <input id="ccName" placeholder="Card name" class="card-input" />
          <button id="btnAddCard" class="btn btn-primary" type="button">Add Card</button>
          <button id="btnEditCards" class="btn" type="button">Manage Cards</button>
        </div>
        <div id="cardsList" class="cards-list"></div>
      </div>
    </div>
  </div>

  <!-- Manage Cards Modal -->
  <div class="modal" id="cardsModal">
    <div class="modal-card">
      <div class="modal-header">
        <h3 class="modal-title">Manage Cards</h3>
        <button class="btn" id="cardsModalClose" type="button">âœ•</button>
      </div>
      <div class="modal-body" id="cardsModalBody"></div>
      <div class="modal-footer">
        <button class="btn" id="cardsModalCancel" type="button">Cancel</button>
        <button class="btn btn-primary" id="cardsModalSave" type="button">Save</button>
      </div>
    </div>
  </div>

  <!-- FX Rates Modal -->
  <div class="modal" id="ratesModal">
    <div class="modal-card">
      <div class="modal-header">
        <h3 class="modal-title">FX Rates (AED base)</h3>
        <button class="btn" id="ratesModalClose" type="button">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="muted" style="margin-top:0">These defaults are approximate. Update them if needed.</p>
        <div id="ratesForm"></div>
      </div>
      <div class="modal-footer">
        <button class="btn" id="ratesModalCancel" type="button">Cancel</button>
        <button class="btn btn-primary" id="ratesModalSave" type="button">Save Rates</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- Store ----------
    const STORE_KEY = 'ccapp_v9';
    const HIDE_KEY = 'ccapp_hide_v1';
    const CURRENCY_KEY = 'ccapp_currency_v1';
    const RATES_KEY = 'ccapp_rates_v1';
    const CURRENCIES = ['AED','USD','EUR','GBP','SAR'];

    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    function loadStore(){
      try{ const data = JSON.parse(localStorage.getItem(STORE_KEY) || 'null');
        return (data && data.cards && data.payments) ? data : {cards:[],payments:{}};
      }catch(e){ return {cards:[],payments:{}}; }
    }

    let store = loadStore();
    let hideAmounts = localStorage.getItem(HIDE_KEY) === '1';
    let totalCurrency = localStorage.getItem(CURRENCY_KEY) || 'AED';

    // Default AED-based rates (AED per 1 unit of currency)
    const DEFAULT_RATES = { AED: 1, USD: 3.6725, EUR: 4.00, GBP: 4.65, SAR: 0.98 };
    function loadRates(){
      try{ const r = JSON.parse(localStorage.getItem(RATES_KEY)||'null'); return r && r.AED ? r : {...DEFAULT_RATES}; }catch(e){ return {...DEFAULT_RATES}; }
    }
    let fx = loadRates();

    // ---------- Helpers ----------
    const ym = d => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
    const formatMonthDisplay = (dateStr) => {
      if(!dateStr) return '';
      const [y,m] = dateStr.split('-');
      const date = new Date(y, m-1);
      return date.toLocaleDateString('en-US',{month:'short', year:'numeric'});
    };
    const formatNumber = n => (+(n)||0).toLocaleString('en-US',{minimumFractionDigits:0, maximumFractionDigits:0});
    const parseAmount = s => { if(s==null) return 0; const clean = String(s).replace(/,/g,'').trim(); const v = parseFloat(clean); return isNaN(v)?0:v; };
    const save = ()=> localStorage.setItem(STORE_KEY, JSON.stringify(store));
    const ensureMonth = (m)=>{ if(!store.payments[m]) store.payments[m] = {}; };

    function convert(amount, from, to){
      from = from||'AED'; to = to||'AED';
      if(!fx[from] || !fx[to]) return amount; // unknown currency => skip
      // fx[x] = AED per 1 x
      const inAED = amount * fx[from];
      return inAED / fx[to];
    }

    // ---------- Render ----------
    function render(){
      const m = $('#month').value; ensureMonth(m);
      const tb = $('#paymentsTbody'); const table = $('#cardsTable'); const empty = $('#emptyState');
      tb.innerHTML = '';

      if(store.cards.length===0){ table.style.display='none'; empty.style.display='block'; }
      else {
        table.style.display='table'; empty.style.display='none';
        store.cards.forEach(c=>{
          if(!store.payments[m][c.id]) store.payments[m][c.id] = {amount:'', dueDate:'', paid:false, currency:'AED'};
          const p = store.payments[m][c.id];
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${escapeHtml(c.name)}${c.last4?` (â€¢â€¢â€¢â€¢ ${escapeHtml(c.last4)})`:''}</td>
            <td>
              <select class="currency-input" data-currency="${c.id}">
                ${CURRENCIES.map(cur=>`<option value="${cur}" ${p.currency===cur?'selected':''}>${cur}</option>`).join('')}
              </select>
              <input type="text" class="amount-input ${hideAmounts?'hidden-amount':''}" inputmode="decimal" data-amount="${c.id}" value="${p.amount!==''?formatNumber(p.amount):''}" placeholder="0" />
            </td>
            <td><input type="date" class="date-input" data-date="${c.id}" value="${p.dueDate||''}" /></td>
            <td><button class="status-toggle ${p.paid?'paid':'unpaid'}" data-togglepaid="${c.id}">${p.paid?'Paid':'Unpaid'}</button></td>`;
          tb.appendChild(tr);
        });
      }

      // Totals with FX conversion to selected currency
      let total=0, paid=0; 
      store.cards.forEach(c=>{
        const p = store.payments[m]?.[c.id]; if(!p) return; const amt = +p.amount||0; const cur = p.currency||'AED';
        const conv = convert(amt, cur, totalCurrency); total += conv; if(p.paid) paid += conv;
      });
      $('#chipTotal').textContent = `${formatNumber(total)} ${totalCurrency}`;
      $('#chipPaid').textContent = `${formatNumber(paid)} ${totalCurrency}`;
      $('#chipRemain').textContent = `${formatNumber(total-paid)} ${totalCurrency}`;
      ['chipTotal','chipPaid','chipRemain'].forEach(id=> $('#'+id).classList.toggle('hidden-amount', hideAmounts));

      // Row events
      $$('input[data-amount]').forEach(inp=>{
        inp.onblur = e => { const id=e.target.dataset.amount; const m=$('#month').value; ensureMonth(m); const v=parseAmount(e.target.value); store.payments[m][id].amount = v; save(); render(); };
        inp.oninput = e => { // format as you type (allow digits and commas)
          const raw = e.target.value.replace(/[^0-9.,]/g,'');
          const num = parseAmount(raw);
          e.target.value = raw.endsWith('.') ? raw : (raw ? formatNumber(num) : '');
        };
      });
      $$('input[data-date]').forEach(inp=> inp.onchange = e => { const id=e.target.dataset.date; const m=$('#month').value; ensureMonth(m); store.payments[m][id].dueDate=e.target.value; save(); render(); });
      $$('button[data-togglepaid]').forEach(btn=> btn.onclick = e => { const id=e.target.dataset.togglepaid; const m=$('#month').value; ensureMonth(m); store.payments[m][id].paid=!store.payments[m][id].paid; save(); render(); });
      $$('select[data-currency]').forEach(sel=> sel.onchange = e => { const id=e.target.dataset.currency; const m=$('#month').value; ensureMonth(m); store.payments[m][id].currency=e.target.value; save(); render(); });

      renderCardsList();
    }

    function renderCardsList(){
      const list = $('#cardsList');
      if(!store.cards.length){ list.textContent='No cards added yet.'; return; }
      list.innerHTML = store.cards.map(c=> `${escapeHtml(c.name)}${c.last4?` (â€¢â€¢â€¢â€¢ ${escapeHtml(c.last4)})`:''}${c.limit?` â€” Limit: ${formatNumber(c.limit)}`:''}`).join('<br>');
    }

    // ---------- Manage Cards Modal ----------
    function openCardsModal(){
      const body = $('#cardsModalBody');
      if(!store.cards.length){ body.innerHTML = '<div class="muted">No cards yet.</div>'; }
      else {
        body.innerHTML = store.cards.map(c=> `
          <div class="card-row">
            <input type="text" value="${escapeHtml(c.name)}" data-edit-name="${c.id}" />
            <span class="muted">${c.last4?`â€¢â€¢â€¢â€¢ ${escapeHtml(c.last4)}`:''}</span>
            <button class="btn btn-danger" data-del="${c.id}" type="button">Delete</button>
          </div>`).join('');
      }
      $('#cardsModal').classList.add('open');
      // delete handlers
      $$('button[data-del]').forEach(b=> b.onclick = e => {
        const id = e.currentTarget.dataset.del;
        if(!confirm('Delete this card?')) return;
        // remove card
        store.cards = store.cards.filter(x=> String(x.id)!==String(id));
        // remove payments for all months
        Object.keys(store.payments).forEach(m=>{ delete store.payments[m][id]; });
        save(); openCardsModal(); render();
      });
    }
    function closeCardsModal(){ $('#cardsModal').classList.remove('open'); }

    $('#cardsModalClose').onclick = closeCardsModal;
    $('#cardsModalCancel').onclick = closeCardsModal;
    $('#cardsModalSave').onclick = () => {
      // apply name edits
      $$('input[data-edit-name]').forEach(inp=>{
        const id = inp.dataset.editName;
        const card = store.cards.find(c=> String(c.id)===String(id));
        if(card){ card.name = inp.value.trim() || card.name; }
      });
      save(); closeCardsModal(); render();
    };

    // ---------- Rates Modal ----------
    function openRatesModal(){
      const container = $('#ratesForm');
      container.innerHTML = CURRENCIES.map(cur=> `
        <div class="card-row">
          <div class="muted">1 ${cur} = </div>
          <input type="text" value="${fx[cur]}" data-rate="${cur}" />
          <div class="muted">AED</div>
        </div>`).join('');
      $('#ratesModal').classList.add('open');
    }
    function closeRatesModal(){ $('#ratesModal').classList.remove('open'); }

    $('#ratesModalClose').onclick = closeRatesModal;
    $('#ratesModalCancel').onclick = closeRatesModal;
    $('#ratesModalSave').onclick = () => {
      $$('input[data-rate]').forEach(inp=>{ const cur = inp.dataset.rate; const v = parseFloat(inp.value); if(!isNaN(v) && v>0) fx[cur]=v; });
      localStorage.setItem(RATES_KEY, JSON.stringify(fx));
      closeRatesModal(); render();
    };

    // ---------- Event Handlers ----------
    $('#btnAddCard').onclick = () => {
      const name = $('#ccName').value.trim();
      if(!name) return alert('Enter card name');
      const last4 = prompt('Last 4 digits (optional)') || '';
      const limitStr = prompt('Credit limit (optional)');
      const limit = limitStr && !isNaN(+limitStr) ? +limitStr : '';
      store.cards.push({ id: Date.now(), name, last4: last4.trim(), limit });
      save(); $('#ccName').value=''; render();
    };

    $('#btnEditCards').onclick = () => { openCardsModal(); };
    $('#btnRates').onclick = () => { openRatesModal(); };

    $('#btnPrev').onclick = ()=> shiftMonth(-1);
    $('#btnNext').onclick = ()=> shiftMonth(1);
    function shiftMonth(d){ let date = $('#month').value ? new Date($('#month').value+'-01T00:00:00') : new Date(); date.setDate(1); date.setMonth(date.getMonth()+d); $('#month').value = ym(date); $('#monthDisplay').textContent = formatMonthDisplay($('#month').value); render(); }

    $('#btnExport').onclick = () => {
      const m = $('#month').value; ensureMonth(m);
      const rows = [["Card","Amount","Currency","Due Date","Status"]];
      store.cards.forEach(c=>{ const p = store.payments[m][c.id] || {}; rows.push([c.name, p.amount||'', p.currency||'AED', p.dueDate||'', p.paid?'Paid':'Unpaid']); });
      const csv = rows.map(r=> r.map(v => '"'+String(v).replace(/"/g,'""')+'"').join(',')).join('\n');
      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download=`credit-cards-${m}.csv`; a.click(); URL.revokeObjectURL(url);
    };

    $('#btnMarkAll').onclick = () => { const m=$('#month').value; ensureMonth(m); store.cards.forEach(c=>{ if(!store.payments[m][c.id]) store.payments[m][c.id]={amount:'',dueDate:'',paid:false,currency:'AED'}; store.payments[m][c.id].paid=true; }); save(); render(); };

    $('#btnReset').onclick = () => { if(!confirm('Reset all payment data for this month?')) return; const m=$('#month').value; delete store.payments[m]; save(); render(); };

    $('#hideToggle').onchange = (e)=>{ hideAmounts = e.target.checked; localStorage.setItem(HIDE_KEY, hideAmounts?'1':'0'); render(); };
    $('#totalCurrency').onchange = (e)=>{ totalCurrency = e.target.value; localStorage.setItem(CURRENCY_KEY, totalCurrency); render(); };

    function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, m=> ({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]) ); }

    // Add card section toggle
    let addCardExpanded = true;
    function syncAddCardSection(){ $('#addCardContent').classList.toggle('expanded', addCardExpanded); $('#expandIcon').classList.toggle('expanded', addCardExpanded); }
    $('#addCardToggle').onclick = ()=>{ addCardExpanded=!addCardExpanded; syncAddCardSection(); };

    // ---------- Init ----------
    (function init(){ const d=new Date(); d.setDate(1); $('#month').value = ym(d); $('#monthDisplay').textContent = formatMonthDisplay($('#month').value); $('#hideToggle').checked = hideAmounts; $('#totalCurrency').value = totalCurrency; syncAddCardSection(); render(); })();
  </script>
</body>
</html>
